<nav class="bg-custom-green text-black fixed top-0 w-full z-50 shadow ">
	<div class="max-w-6xl px-4 mx-auto sm:px-6 lg:px-8 h-9 flex items-center justify-end">
		<a href="/news" class="text-custom-xs">
			Tin Tức
		</a>
		<a href="/store" class="ml-6 text-custom-xs">
			Gian Hàng
		</a>
	</div>
</nav>
{{#if showHeader}}
	<nav class="bg-white text-custom-green text-custom-base fixed top-9 w-full z-50 shadow ">
		<div class="max-w-full px-4 sm:px-6 lg:px-8">
			<div class="flex items-center justify-between md:h-28 h-12">
				<!-- Mobile Toggle -->
				<div class="flex items-center md:hidden">
					<button class="text-custom-green focus:outline-none" onclick="document.getElementById('mobileMenu').classList.toggle('hidden')">
						<svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
							<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
								d="M4 6h16M4 12h16M4 18h16" />
						</svg>
					</button>
				</div>

				<div class='items-center justify-center py-6 hidden md:flex'>
					<a href='/' class='flex items-center'>
						<img src='/img/logo.png' alt='Logo' class='w-20 h-auto' />
					</a>
				</div>

				<!-- Search Form -->
				<div class="hidden md:flex space-x-6 items-center">
					<form method="get" action="/search" class="hidden md:block min-w-[400px]">
						<div class="relative">
							<input type="text" name="search" value="{{search}}" placeholder="Tìm kiếm"
								class="w-full px-4 py-2 rounded-md border-custom text-black bg-white focus:outline-none focus:ring"
							/>
							<button type="submit" class="absolute right-0 top-0 w-12 h-full text-white bg-btn border-r rounded-r">
								<i class="fas fa-search"></i>
							</button>
						</div>
					</form>

				<!-- Menu Items -->

					{{!-- <a href="/" class="hover:underline flex items-center gap-1">
						<i class="fa fa-home"></i> Trang Chủ
					</a> --}}
					{{!-- <a href="/order" class="relative hover:underline flex items-center gap-1">
						<span id="orderCount"
							class="absolute -top-2 -right-3 bg-red-600 text-white text-xs px-1 rounded-full">
							{{#if orderCount}}{{formatCount orderCount}}{{else}}0{{/if}}
						</span>
						<i class="fas fa-file"></i> Đơn Hàng
					</a> --}}
					<a href="/cart" class="relative hover:underline flex items-center gap-1">
						<span id="cartCount"
							class="absolute -top-2 -right-3 bg-red-600 text-white text-xs px-1 rounded-full">
							{{#if cartCount}}{{formatCount cartCount}}{{else}}0{{/if}}
						</span>
						<i class="fas fa-shopping-cart"></i> Giỏ Hàng
					</a>
				</div>

				<!-- User Dropdown or Auth Links -->
				<div class="relative">
					{{#if sessionUser}}
						<div class="relative group">
							<button
								class="flex items-center space-x-2 focus:outline-none">
								<img src="/img/undraw_profile.svg" class="w-8 h-8 rounded-full" />
								<span class="text-sm">{{sessionUser}}</span>
							</button>
							<!-- Invisible gap to prevent dropdown from closing -->
							<div class="absolute top-full left-0 right-0 h-6 bg-transparent"></div>
							<div id="dropdownMenu"
								class="hidden group-hover:block absolute right-0 mt-1 bg-white text-black shadow rounded w-40 z-50">
								<a href="#" onclick="toggleModal(true)" class="block px-4 py-2 hover:bg-gray-100">
									<i class="fas fa-user mr-2"></i> Thông tin
								</a>
								<a href="/order" class="block px-4 py-2 hover:bg-gray-100">
									<i class="fas fa-file mr-3"></i> Đơn hàng
								</a>
								<a href="#" onclick="togglePasswordModal(true)" class="block px-4 py-2 hover:bg-gray-100">
									<i class="fas fa-key mr-2"></i> Đổi mật khẩu
								</a>
								<a href="/logout" class="block px-4 py-2 hover:bg-gray-100">
									<i class="fas fa-sign-out-alt mr-2"></i> Đăng xuất
								</a>
							</div>
						</div>
					{{else}}
						<div class="flex space-x-4">
							<a href="/login" class="hover:underline">Đăng nhập</a>
							<a href="/register" class="hover:underline">Đăng ký</a>
						</div>
					{{/if}}
				</div>
			</div>
		</div>

		<!-- Mobile Menu -->
		<div id="mobileMenu" class="md:hidden hidden px-4 pb-4 space-y-2">
			<form method="get" action="/search">
				<div class="relative">
					<input type="text" name="search" value="{{search}}" placeholder="Search for..."
						class="w-full px-4 py-2 rounded-md border-custom text-black bg-white focus:outline-none focus:ring"
					/>
					<button type="submit" class="absolute right-0 top-0 w-12 h-full text-white bg-btn border-r rounded-r">
						<i class="fas fa-search"></i>
					</button>
				</div>
			</form>
			<a href="/" class="block hover:underline">Trang Chủ</a>
			<a href="/order" class="block hover:underline">Đơn Hàng</a>
			<a href="/cart" class="block hover:underline">Giỏ Hàng</a>
			{{#unless sessionUser}}
				<a href="/login" class="block hover:underline">Login</a>
				<a href="/register" class="block hover:underline">Register</a>
			{{/unless}}
		</div>
	</nav>
{{/if}}

<!-- Spacer -->
{{#if showHeader}}
	<div class="md:h-[150px] h-24"></div>
{{else}}
	<div class="md:h-[36px] h-24"></div>
{{/if}}

<!-- Content -->
{{> profile}}
