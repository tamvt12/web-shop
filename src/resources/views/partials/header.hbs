<nav class="bg-[#3b5998] text-white fixed top-0 w-full z-50 shadow">
  <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
    <div class="flex items-center justify-between h-16">
      <!-- Mobile Toggle -->
      <div class="flex items-center md:hidden">
        <button class="text-white focus:outline-none" onclick="document.getElementById('mobileMenu').classList.toggle('hidden')">
          <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
              d="M4 6h16M4 12h16M4 18h16" />
          </svg>
        </button>
      </div>

      <!-- Search Form -->
      <form method="get" action="/search" class="hidden md:block w-1/3">
        <div class="relative">
          <input type="text" name="search" value="{{search}}" placeholder="Search for..."
            class="w-full px-4 py-2 rounded text-black bg-white focus:outline-none focus:ring"
          />
          <button type="submit" class="absolute right-2 top-2 text-gray-700">
            <i class="fas fa-search"></i>
          </button>
        </div>
      </form>

      <!-- Menu Items -->
      <div class="hidden md:flex space-x-6 items-center">
        <a href="/" class="hover:underline flex items-center gap-1">
          <i class="fa fa-home"></i> Trang Chủ
        </a>
        <a href="/order" class="relative hover:underline flex items-center gap-1">
          <span id="orderCount"
            class="absolute -top-2 -right-3 bg-red-600 text-white text-xs px-1 rounded-full">
            {{#if orderCount}}{{formatCount orderCount}}{{else}}0{{/if}}
          </span>
          <i class="fas fa-file"></i> Đơn Hàng
        </a>
        <a href="/cart" class="relative hover:underline flex items-center gap-1">
          <span id="cartCount"
            class="absolute -top-2 -right-3 bg-red-600 text-white text-xs px-1 rounded-full">
            {{#if cartCount}}{{formatCount cartCount}}{{else}}0{{/if}}
          </span>
          <i class="fas fa-shopping-cart"></i> Giỏ Hàng
        </a>
      </div>

      <!-- User Dropdown or Auth Links -->
      <div class="relative ml-auto">
        {{#if sessionUser}}
          <button onclick="document.getElementById('dropdownMenu').classList.toggle('hidden')"
            class="flex items-center space-x-2 focus:outline-none">
            <img src="/img/undraw_profile.svg" class="w-8 h-8 rounded-full" />
            <span class="text-sm">{{sessionUser}}</span>
          </button>
          <div id="dropdownMenu"
            class="hidden absolute right-0 mt-2 bg-white text-black shadow rounded w-40 z-50">
            <a href="#" class="block px-4 py-2 hover:bg-gray-100">
              <i class="fas fa-user mr-2"></i> Profile
            </a>
            <a href="/logout" class="block px-4 py-2 hover:bg-gray-100">
              <i class="fas fa-sign-out-alt mr-2"></i> Logout
            </a>
          </div>
        {{else}}
          <div class="flex space-x-4">
            <a href="/login" class="hover:underline">Login</a>
            <a href="/register" class="hover:underline">Register</a>
          </div>
        {{/if}}
      </div>
    </div>
  </div>

  <!-- Mobile Menu -->
  <div id="mobileMenu" class="md:hidden hidden px-4 pb-4 space-y-2">
    <form method="get" action="/search">
      <div class="relative">
        <input type="text" name="search" value="{{search}}" placeholder="Search for..."
          class="w-full px-4 py-2 rounded text-black bg-white focus:outline-none focus:ring"
        />
        <button type="submit" class="absolute right-2 top-2 text-gray-700">
          <i class="fas fa-search"></i>
        </button>
      </div>
    </form>
    <a href="/" class="block hover:underline">Trang Chủ</a>
    <a href="/order" class="block hover:underline">Đơn Hàng</a>
    <a href="/cart" class="block hover:underline">Giỏ Hàng</a>
    {{#unless sessionUser}}
      <a href="/login" class="block hover:underline">Login</a>
      <a href="/register" class="block hover:underline">Register</a>
    {{/unless}}
  </div>
</nav>

<!-- Spacer -->
<div class="h-16"></div>

<!-- Content -->
{{> profile}}
